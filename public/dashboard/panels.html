<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Vix Mídia - Painéis</title>
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />
  <!-- Bootstrap Icons -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" />
  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <!-- Custom CSS -->
  <link rel="stylesheet" href="modern-dashboard.css">
  <style>
    /* Estilos específicos da página de painéis */
    .panel-status {
      padding: 0.25rem 0.5rem;
      border-radius: 0.375rem;
      font-size: 0.75rem;
      font-weight: 500;
    }
    .panel-status.active {
      background-color: rgba(76, 175, 80, 0.1);
      color: #4caf50;
    }
    .panel-status.inactive {
      background-color: rgba(244, 67, 54, 0.1);
      color: #f44336;
    }
    
    /* Estilos para cards de seleção de tipo de painel */
    .panel-type-card {
      transition: all 0.3s ease;
      border: 2px solid #dee2e6 !important;
    }
    
    .panel-type-card:hover {
      border: 2px solid #0d6efd !important;
      background-color: #f8f9ff !important;
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(13, 110, 253, 0.15);
    }
    
    .panel-type-card:hover i {
      color: #0d6efd !important;
    }
    
    .panel-type-card:hover h6 {
      color: #0d6efd !important;
    }
    
    .panel-type-card.selected {
      border: 2px solid #0d6efd !important;
      background-color: #f8f9ff !important;
    }
    
    .panel-type-card.selected i {
      color: #0d6efd !important;
    }
    
    .panel-type-card.selected h6 {
      color: #0d6efd !important;
    }
    
    /* Garantir que a sidebar tenha os estilos corretos */
    .sidebar {
      z-index: 1050 !important;
    }
  </style>
</head>

<body>
  <!-- Overlay para sidebar em dispositivos móveis -->
  <div class="sidebar-overlay"></div>

  <div class="wrapper">
    <!-- Sidebar -->
    <nav class="sidebar" id="sidebar">
      <div class="sidebar-header">
        <img src="../img/vixmidia_dark.png" alt="Logo VixMídia" class="img-fluid">
        <button class="sidebar-toggle">
          <i class="bi bi-chevron-left"></i>
        </button>
      </div>

      <ul class="list-unstyled">
        <li>
          <a class="sidebar-link" href="index.html">
            <i class="bi bi-speedometer2"></i>
            <span>Dashboard</span>
          </a>
        </li>
        <li>
          <a class="sidebar-link" href="dispositivos.html">
            <i class="bi bi-tv"></i>
            <span>Dispositivos</span>
          </a>
        </li>
        <li>
          <a class="sidebar-link active" href="paineis.html">
            <i class="bi bi-pip-fill"></i>
            <span>Painéis</span>
          </a>
        </li>
        <li>
          <a class="sidebar-link" href="midias.html">
            <i class="bi bi-collection-play"></i>
            <span>Mídias</span>
          </a>
        </li>
        <li>
          <a class="sidebar-link" href="clients.html">
            <i class="bi bi-person-video2"></i>
            <span>Clientes</span>
          </a>
        </li>
        <li>
          <a class="sidebar-link" href="campaigns.html">
            <i class="bi bi-megaphone"></i>
            <span>Campanhas</span>
          </a>
        </li>
        <li>
          <a class="sidebar-link" href="relatorios.html">
            <i class="bi bi-clipboard2-pulse"></i>
            <span>Relatórios</span>
          </a>
        </li>
      </ul>

      <hr>

      <ul class="list-unstyled">
        <li>
          <a class="sidebar-link" href="configuracoes.html">
            <i class="bi bi-gear"></i>
            <span>Configurações</span>
          </a>
        </li>
        <li>
          <a class="sidebar-link" id="logoutBtnSidebar">
            <i class="bi bi-box-arrow-left"></i>
            <span>Sair</span>
          </a>
        </li>
      </ul>

      <!-- Informações do usuário -->
      <div class="sidebar-footer mt-auto">
        <div class="d-flex align-items-center mb-3">
          <div class="sidebar-user-icon me-2">
            <i class="bi bi-person-circle text-white" style="font-size: 1.5rem;"></i>
          </div>
          <div class="sidebar-user-info">
            <span id="userName" class="text-white">Usuário</span>
          </div>
        </div>
        <!-- Toggle de tema claro/escuro -->
        <div class="px-0 py-2">
          <div class="form-check form-switch d-flex align-items-center">
            <input class="form-check-input me-2" type="checkbox" id="themeToggle">
            <label class="form-check-label text-white" for="themeToggle">
              <i class="bi bi-moon"></i>
              <span class="ms-2">Modo Escuro</span>
            </label>
          </div>
        </div>
      </div>
    </nav>

    <!-- Conteúdo Principal -->
    <main class="content">
      <!-- Cabeçalho da Página -->
      <div class="page-header">
        <div>
          <h1 class="page-title">Painéis</h1>
          <p class="page-subtitle">Gerencie seus painéis de exibição</p>
        </div>
        <div class="d-flex align-items-center">
          <!-- Barra de pesquisa -->
          <div class="search-container me-3 position-relative">
            <input type="text" id="searchInput" class="form-control search-input" placeholder="Buscar painéis...">
            <i class="bi bi-search search-icon"></i>
            <div class="search-results shadow-sm"></div>
          </div>
          <!-- Botão de adicionar painel -->
           <button
             class="btn btn-success me-2"
             data-bs-toggle="modal"
             data-bs-target="#addPanelModal"
          >
             <i class="bi bi-plus-circle me-1"></i>Novo Painel
           </button>
           <!-- Ícone de configuração -->
           <button class="btn btn-outline-secondary" data-bs-toggle="modal" data-bs-target="#configModal" title="Configurações">
             <i class="bi bi-gear"></i>
           </button>
         </div>
       </div>

       <!-- Container de alertas -->
       <div id="alertContainer"></div>

      <!-- Alertas -->
      <div id="alertContainer"></div>

      <!-- Loading -->
      <div id="loading" class="text-center py-5">
        <div class="spinner-border text-primary" role="status">
          <span class="visually-hidden">Carregando...</span>
        </div>
        <p class="mt-2 text-muted">Carregando painéis...</p>
      </div>

      <!-- Card de Estatísticas -->
      <div id="statsContainer" class="row mb-4" style="display: none">
        <div class="col-3">
          <div class="card bg-primary text-white">
            <div class="card-body">
              <div class="d-flex align-items-center">
                <div class="flex-grow-1">
                  <h5 class="card-title mb-1 text-white">
                    <i class="bi bi-grid-3x3-gap me-2 text-white" ></i>Total de Painéis
                  </h5>
                  <h2 class="mb-0 text-white" id="totalPanels">0</h2>
                  <small class="opacity-75">painéis cadastrados</small>
                </div>
                <div class="ms-3">
                  <i class="bi bi-bar-chart-line" style="font-size: 3rem; opacity: 0.3;"></i>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Lista de Painéis -->
      <div id="painelContainer" class="row g-4" style="display: none">
        <!-- Painéis serão carregados aqui -->
      </div>

      <!-- Mensagem quando não há painéis -->
      <div id="noPanels" class="text-center py-5" style="display: none">
        <i class="bi bi-grid-3x3-gap display-1 text-muted"></i>
        <h4 class="mt-3 text-muted">Nenhum painel encontrado</h4>
        <p class="text-muted">Crie seu primeiro painel para começar!</p>
        <button
          class="btn btn-primary"
          data-bs-toggle="modal"
          data-bs-target="#addPanelModal"
        >
          <i class="bi bi-plus-circle me-2"></i>Criar Primeiro Painel
        </button>
      </div>
    </div>
    <!-- Modal Adicionar Painel -->
    <div class="modal fade" id="addPanelModal" tabindex="-1">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">
              <i class="bi bi-plus-circle me-2"></i>Novo Painel
            </h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
            ></button>
          </div>
          <div class="modal-body">
            <form id="addPanelForm">
              <div class="mb-3">
                <label for="panelName" class="form-label"
                  >Nome do Painel *</label
                >
                <input
                  type="text"
                  class="form-control"
                  id="panelName"
                  required
                  placeholder="Ex: Painel Principal"
                />
              </div>
              <div class="mb-3">
                <label for="panelDescription" class="form-label"
                  >Descrição</label
                >
                <textarea
                  class="form-control"
                  id="panelDescription"
                  rows="3"
                  placeholder="Descrição opcional do painel"
                ></textarea>
              </div>
              
              <!-- Status do Painel -->
              <div class="mb-3">
                <label class="form-label">Status do Painel</label>
                <div class="form-check form-switch">
                  <input class="form-check-input" type="checkbox" id="panelActive" checked>
                  <label class="form-check-label" for="panelActive">
                    Ativo
                  </label>
                </div>
              </div>
              
              <!-- Tipo de Painel -->
              <div class="mb-3">
                <label class="form-label">Tipo de Painel</label>
                <input type="hidden" id="panelType" value="FULL_SCREEN">
                <div class="row g-2">
                  <div class="col-6">
                    <div class="card panel-type-card" data-type="FULL_SCREEN" onclick="selectPanelType('FULL_SCREEN', 'add')" style="cursor: pointer; border: 2px solid #dee2e6; transition: all 0.3s;">
                      <div class="card-body text-center py-3">
                        <i class="bi bi-tv" style="font-size: 2rem; color: #6c757d;"></i>
                        <h6 class="mt-2 mb-0">Tela Cheia</h6>
                        <small class="text-muted">Conteúdo em tela completa</small>
                      </div>
                    </div>
                  </div>
                  <div class="col-6">
                    <div class="card panel-type-card" data-type="DIVIDED" onclick="selectPanelType('DIVIDED', 'add')" style="cursor: pointer; border: 2px solid #dee2e6; transition: all 0.3s;">
                      <div class="card-body text-center py-3">
                        <i class="bi bi-layout-split" style="font-size: 2rem; color: #6c757d;"></i>
                        <h6 class="mt-2 mb-0">Dividida</h6>
                        <small class="text-muted">Conteúdo em seções</small>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              
              <!-- Configurações de Exibição -->
              <h6 class="mb-3"><i class="bi bi-gear me-2"></i>Configurações de Exibição</h6>
              
              <!-- Clima -->
              <div class="mb-3">
                <div class="form-check">
                  <input class="form-check-input" type="checkbox" id="showWeather" onchange="toggleFrequencyInput('Weather')">
                  <label class="form-check-label" for="showWeather">
                    <i class="bi bi-cloud-sun me-2"></i>Exibir Clima
                  </label>
                </div>
                <div class="mt-2" id="weatherFrequencyDiv" style="display: none;">
                  <label for="weatherFrequency" class="form-label">Frequência (minutos)</label>
                  <input type="number" class="form-control" id="weatherFrequency" value="10" min="1">
                </div>
              </div>
              
              <!-- Notícias -->
              <div class="mb-3">
                <div class="form-check">
                  <input class="form-check-input" type="checkbox" id="showNews" onchange="toggleFrequencyInput('News')">
                  <label class="form-check-label" for="showNews">
                    <i class="bi bi-newspaper me-2"></i>Exibir Notícias
                  </label>
                </div>
                <div class="mt-2" id="newsFrequencyDiv" style="display: none;">
                  <label for="newsFrequency" class="form-label">Frequência (minutos)</label>
                  <input type="number" class="form-control" id="newsFrequency" value="10" min="1">
                </div>
              </div>
              
              <!-- Loteria -->
              <div class="mb-3">
                <div class="form-check">
                  <input class="form-check-input" type="checkbox" id="showLottery" onchange="toggleFrequencyInput('Lottery')">
                  <label class="form-check-label" for="showLottery">
                    <i class="bi bi-trophy me-2"></i>Exibir Loteria
                  </label>
                </div>
                <div class="mt-2" id="lotteryFrequencyDiv" style="display: none;">
                  <label for="lotteryFrequency" class="form-label">Frequência (minutos)</label>
                  <input type="number" class="form-control" id="lotteryFrequency" value="10" min="1">
                </div>
              </div>
              
              <!-- Moedas -->
              <div class="mb-3">
                <div class="form-check">
                  <input class="form-check-input" type="checkbox" id="showCoins" onchange="toggleFrequencyInput('Coins')">
                  <label class="form-check-label" for="showCoins">
                    <i class="bi bi-currency-bitcoin me-2"></i>Exibir Cotações
                  </label>
                </div>
                <div class="mt-2" id="coinsFrequencyDiv" style="display: none;">
                  <label for="coinsFrequency" class="form-label">Frequência (minutos)</label>
                  <input type="number" class="form-control" id="coinsFrequency" value="10" min="1">
                </div>
              </div>
              
              <!-- Tela Customizada -->
              <div class="mb-3">
                <div class="form-check">
                  <input class="form-check-input" type="checkbox" id="showCustomScreen" onchange="toggleFrequencyInput('CustomScreen')">
                  <label class="form-check-label" for="showCustomScreen">
                    <i class="bi bi-palette me-2"></i>Exibir Tela Customizada
                  </label>
                </div>
                <div class="mt-2" id="customScreenFrequencyDiv" style="display: none;">
                  <label for="customScreenFrequency" class="form-label">Frequência (minutos)</label>
                  <input type="number" class="form-control" id="customScreenFrequency" value="2" min="1">
                  <label for="customScreenContent" class="form-label mt-2">Conteúdo Customizado</label>
                  <textarea class="form-control" id="customScreenContent" rows="3" placeholder="HTML ou conteúdo personalizado"></textarea>
                </div>
              </div>
            </form>
          </div>
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-secondary"
              data-bs-dismiss="modal"
            >
              Cancelar
            </button>
            <button
              type="button"
              class="btn btn-success"
              onclick="salvarPainel()"
            >
              <i class="bi bi-check-circle me-1"></i>Criar Painel
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Modal Editar Painel -->
    <div class="modal fade" id="editPanelModal" tabindex="-1" aria-labelledby="editPanelModalLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="editPanelModalLabel">
              <i class="bi bi-pencil-square me-2"></i>Editar Painel
            </h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Fechar"
            ></button>
          </div>
          <div class="modal-body">
            <form id="editPanelForm">
              <input type="hidden" id="editPanelId" />
              <div class="mb-3">
                <label for="editPanelName" class="form-label"
                  >Nome do Painel *</label
                >
                <input
                  type="text"
                  class="form-control"
                  id="editPanelName"
                  required
                />
              </div>
              <div class="mb-3">
                <label for="editPanelDescription" class="form-label"
                  >Descrição</label
                >
                <textarea
                  class="form-control"
                  id="editPanelDescription"
                  rows="3"
                ></textarea>
              </div>
              
              <!-- Status do Painel -->
              <div class="mb-3">
                <label class="form-label">Status do Painel</label>
                <div class="form-check form-switch">
                  <input class="form-check-input" type="checkbox" id="editPanelActive" checked>
                  <label class="form-check-label" for="editPanelActive">
                    <span id="editPanelStatusText">Ativo</span>
                  </label>
                </div>
              </div>
              
              <!-- Tipo de Painel -->
              <div class="mb-3">
                <label class="form-label">Tipo de Painel</label>
                <input type="hidden" id="editPanelType" value="FULL_SCREEN">
                <div class="row g-2">
                  <div class="col-6">
                    <div class="card panel-type-card" data-type="FULL_SCREEN" onclick="selectPanelType('FULL_SCREEN', 'edit')" style="cursor: pointer; border: 2px solid #dee2e6; transition: all 0.3s;">
                      <div class="card-body text-center py-3">
                        <i class="bi bi-tv" style="font-size: 2rem; color: #6c757d;"></i>
                        <h6 class="mt-2 mb-0">Tela Cheia</h6>
                        <small class="text-muted">Conteúdo em tela completa</small>
                      </div>
                    </div>
                  </div>
                  <div class="col-6">
                    <div class="card panel-type-card" data-type="DIVIDED" onclick="selectPanelType('DIVIDED', 'edit')" style="cursor: pointer; border: 2px solid #dee2e6; transition: all 0.3s;">
                      <div class="card-body text-center py-3">
                        <i class="bi bi-layout-split" style="font-size: 2rem; color: #6c757d;"></i>
                        <h6 class="mt-2 mb-0">Dividida</h6>
                        <small class="text-muted">Conteúdo em seções</small>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              
              <!-- Configurações de Exibição -->
              <h6 class="mb-3"><i class="bi bi-gear me-2"></i>Configurações de Exibição</h6>
              
              <!-- Clima -->
              <div class="mb-3">
                <div class="form-check">
                  <input class="form-check-input" type="checkbox" id="editShowWeather" onchange="toggleEditFrequencyInput('Weather')">
                  <label class="form-check-label" for="editShowWeather">
                    <i class="bi bi-cloud-sun me-2"></i>Exibir Clima
                  </label>
                </div>
                <div class="mt-2" id="editWeatherFrequencyDiv" style="display: none;">
                  <label for="editWeatherFrequency" class="form-label">Frequência (minutos)</label>
                  <input type="number" class="form-control" id="editWeatherFrequency" value="10" min="1">
                </div>
              </div>
              
              <!-- Notícias -->
              <div class="mb-3">
                <div class="form-check">
                  <input class="form-check-input" type="checkbox" id="editShowNews" onchange="toggleEditFrequencyInput('News')">
                  <label class="form-check-label" for="editShowNews">
                    <i class="bi bi-newspaper me-2"></i>Exibir Notícias
                  </label>
                </div>
                <div class="mt-2" id="editNewsFrequencyDiv" style="display: none;">
                  <label for="editNewsFrequency" class="form-label">Frequência (minutos)</label>
                  <input type="number" class="form-control" id="editNewsFrequency" value="10" min="1">
                </div>
              </div>
              
              <!-- Loteria -->
              <div class="mb-3">
                <div class="form-check">
                  <input class="form-check-input" type="checkbox" id="editShowLottery" onchange="toggleEditFrequencyInput('Lottery')">
                  <label class="form-check-label" for="editShowLottery">
                    <i class="bi bi-trophy me-2"></i>Exibir Loteria
                  </label>
                </div>
                <div class="mt-2" id="editLotteryFrequencyDiv" style="display: none;">
                  <label for="editLotteryFrequency" class="form-label">Frequência (minutos)</label>
                  <input type="number" class="form-control" id="editLotteryFrequency" value="10" min="1">
                </div>
              </div>
              
              <!-- Moedas -->
              <div class="mb-3">
                <div class="form-check">
                  <input class="form-check-input" type="checkbox" id="editShowCoins" onchange="toggleEditFrequencyInput('Coins')">
                  <label class="form-check-label" for="editShowCoins">
                    <i class="bi bi-currency-bitcoin me-2"></i>Exibir Cotações
                  </label>
                </div>
                <div class="mt-2" id="editCoinsFrequencyDiv" style="display: none;">
                  <label for="editCoinsFrequency" class="form-label">Frequência (minutos)</label>
                  <input type="number" class="form-control" id="editCoinsFrequency" value="10" min="1">
                </div>
              </div>
              
              <!-- Tela Customizada -->
              <div class="mb-3">
                <div class="form-check">
                  <input class="form-check-input" type="checkbox" id="editShowCustomScreen" onchange="toggleEditFrequencyInput('CustomScreen')">
                  <label class="form-check-label" for="editShowCustomScreen">
                    <i class="bi bi-palette me-2"></i>Exibir Tela Customizada
                  </label>
                </div>
                <div class="mt-2" id="editCustomScreenFrequencyDiv" style="display: none;">
                  <label for="editCustomScreenFrequency" class="form-label">Frequência (minutos)</label>
                  <input type="number" class="form-control" id="editCustomScreenFrequency" value="2" min="1">
                  <label for="editCustomScreenContent" class="form-label mt-2">Conteúdo Customizado</label>
                  <textarea class="form-control" id="editCustomScreenContent" rows="3" placeholder="HTML ou conteúdo personalizado"></textarea>
                </div>
              </div>
            </form>
          </div>
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-secondary"
              data-bs-dismiss="modal"
            >
              Cancelar
            </button>
            <button
              type="button"
              class="btn btn-primary"
              onclick="salvarEdicaoPainel()"
            >
              <i class="bi bi-check-circle me-1"></i>Salvar Alterações
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Modal Confirmar Exclusão -->
    <div class="modal fade" id="deletePanelModal" tabindex="-1">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header bg-danger text-white">
            <h5 class="modal-title">
              <i class="bi bi-exclamation-triangle me-2"></i>Confirmar Exclusão
            </h5>
            <button
              type="button"
              class="btn-close btn-close-white"
              data-bs-dismiss="modal"
            ></button>
          </div>
          <div class="modal-body">
            <div class="text-center">
              <i
                class="bi bi-exclamation-triangle-fill text-danger"
                style="font-size: 3rem"
              ></i>
              <h4 class="mt-3">Tem certeza?</h4>
              <p class="text-muted">
                Você está prestes a excluir o painel "<strong
                  id="deletePanelName"
                ></strong
                >".
              </p>
              <div class="alert alert-warning">
                <i class="bi bi-info-circle me-2"></i>
                <strong>Atenção:</strong> Todos os dispositivos associados a
                este painel também serão excluídos. Esta ação não pode ser
                desfeita.
              </div>
            </div>
            <input type="hidden" id="deletePanelId" />
          </div>
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-secondary"
              data-bs-dismiss="modal"
            >
              Cancelar
            </button>
            <button
              type="button"
              class="btn btn-danger"
              onclick="confirmarExclusaoPainel()"
            >
              <i class="bi bi-trash me-1"></i>Sim, Excluir
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
      // ===== VARIÁVEIS GLOBAIS =====
      const token = localStorage.getItem("token");
      const userName = localStorage.getItem("usuarioName");
      const painelContainer = document.getElementById("painelContainer");
      const loading = document.getElementById("loading");
      const noPanels = document.getElementById("noPanels");
      const alertContainer = document.getElementById("alertContainer");

      // ===== VERIFICAÇÃO DE AUTENTICAÇÃO =====
      if (!token) {
        window.location.href = "/";
      }

      // ===== INICIALIZAÇÃO =====
      document.addEventListener("DOMContentLoaded", function () {
        document.getElementById("userName").textContent = userName || "Usuário";
        
        // Configurar logout da sidebar
        const logoutBtnSidebar = document.getElementById("logoutBtnSidebar");
        if (logoutBtnSidebar) {
          logoutBtnSidebar.onclick = function () {
            if (confirm("Tem certeza que deseja sair?")) {
              localStorage.removeItem("usuarioEmail");
              localStorage.removeItem("usuarioName");
              localStorage.removeItem("token");
              window.location.href = "/";
            }
          };
        }
        
        // Configurar logout do modal
         const logoutBtnModal = document.getElementById("logoutBtnModal");
         if (logoutBtnModal) {
           logoutBtnModal.onclick = function () {
             if (confirm("Tem certeza que deseja sair?")) {
               localStorage.removeItem("usuarioEmail");
               localStorage.removeItem("usuarioName");
               localStorage.removeItem("token");
               window.location.href = "/";
             }
           };
         }
         
         // Configurar toggle de tema
         const themeToggle = document.getElementById('themeToggle');
         const themeToggleModal = document.getElementById('themeToggleModal');
         const body = document.body;
         
         // Verificar tema salvo
         const savedTheme = localStorage.getItem('theme');
         if (savedTheme === 'dark') {
           body.classList.add('dark-theme');
           if (themeToggle) themeToggle.checked = true;
           if (themeToggleModal) themeToggleModal.checked = true;
         }
         
         // Função para alternar tema
         function toggleTheme(isDark) {
           if (isDark) {
             body.classList.add('dark-theme');
             localStorage.setItem('theme', 'dark');
           } else {
             body.classList.remove('dark-theme');
             localStorage.setItem('theme', 'light');
           }
           // Sincronizar ambos os toggles
           if (themeToggle) themeToggle.checked = isDark;
           if (themeToggleModal) themeToggleModal.checked = isDark;
         }
         
         if (themeToggle) {
           themeToggle.addEventListener('change', function() {
             toggleTheme(this.checked);
           });
         }
         
         if (themeToggleModal) {
           themeToggleModal.addEventListener('change', function() {
             toggleTheme(this.checked);
           });
         }
         
         // Carregar informações do usuário no modal
         const userNameModal = document.getElementById('userNameModal');
         const userEmailModal = document.getElementById('userEmailModal');
         const userEmail = localStorage.getItem('usuarioEmail');
         
         if (userNameModal) userNameModal.textContent = userName || 'Usuário';
         if (userEmailModal) userEmailModal.textContent = userEmail || 'usuario@email.com';
         
         carregarPaineis();
      });

      // ===== FUNÇÃO PARA MOSTRAR ALERTAS =====
      function mostrarAlerta(tipo, mensagem) {
        const alertClass =
          tipo === "sucesso" ? "alert-success" : "alert-danger";
        const icon =
          tipo === "sucesso" ? "bi-check-circle" : "bi-exclamation-triangle";

        const alertHtml = `
                <div class="alert ${alertClass} alert-dismissible fade show" role="alert">
                    <i class="bi ${icon} me-2"></i>
                    ${mensagem}
                    <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                </div>
            `;

        alertContainer.innerHTML = alertHtml;

        // Auto-remover após 5 segundos
        setTimeout(() => {
          const alert = alertContainer.querySelector(".alert");
          if (alert) {
            const bsAlert = new bootstrap.Alert(alert);
            bsAlert.close();
          }
        }, 5000);
      }

      // ===== NAVEGAÇÃO =====
      function irParaDispositivos() {
        window.location.href = "dispositivos.html";
      }

      // ===== LOGOUT =====
      const logoutBtn = document.getElementById("logoutBtn");
      if (logoutBtn) {
        logoutBtn.onclick = function () {
          if (confirm("Tem certeza que deseja sair?")) {
            localStorage.removeItem("usuarioEmail");
            localStorage.removeItem("usuarioName");
            localStorage.removeItem("token");
            window.location.href = "/";
          }
        };
      }
      
      // ===== FUNÇÕES PARA CONTROLAR CAMPOS DE FREQUÊNCIA =====
      // Função para alternar a exibição dos campos de frequência
      function toggleFrequencyInput(type) {
        const checkbox = document.getElementById(`show${type}`);
        const frequencyDiv = document.getElementById(`${type.toLowerCase()}FrequencyDiv`);
        
        if (checkbox.checked) {
          frequencyDiv.style.display = 'block';
        } else {
          frequencyDiv.style.display = 'none';
        }
      }
      
      // Função para alternar a exibição dos campos de frequência no modal de edição
      function toggleEditFrequencyInput(type) {
        const checkbox = document.getElementById(`editShow${type}`);
        const frequencyDiv = document.getElementById(`edit${type}FrequencyDiv`);
        
        if (checkbox.checked) {
          frequencyDiv.style.display = 'block';
        } else {
          frequencyDiv.style.display = 'none';
        }
      }


      // Função para formatar data
      const formatarData = (data) => {
          if (!data) return '-';
          const d = new Date(data);
          return d.toLocaleString('pt-BR', {
              day: '2-digit',
              month: '2-digit',
              year: 'numeric',
              hour: '2-digit',
              minute: '2-digit'
          });
      };

      // ===== CARREGAR PAINÉIS =====
      async function carregarPaineis() {
        try {
          loading.style.display = "block";
          painelContainer.style.display = "none";
          noPanels.style.display = "none";

          const resposta = await fetch(
            buildApiUrl(APP_CONFIG.API_ENDPOINTS.PANELS),
            {
              headers: {
                Authorization: "Bearer " + token,
              },
            }
          );

          if (!resposta.ok) {
            throw new Error("Erro ao carregar painéis");
          }

          const paineis = await resposta.json();
          loading.style.display = "none";

          if (!Array.isArray(paineis) || paineis.length === 0) {
            noPanels.style.display = "block";
            document.getElementById("statsContainer").style.display = "none";
            return;
          }

          // Atualizar contador de painéis
          document.getElementById("totalPanels").textContent = paineis.length;
          document.getElementById("statsContainer").style.display = "block";

          renderizarPaineis(paineis);
          painelContainer.style.display = "flex";
        } catch (error) {
          console.error("Erro ao carregar painéis:", error);
          loading.style.display = "none";
          mostrarAlerta("erro", "Erro ao carregar painéis. Tente novamente.");
        }
      }

      
      // ===== RENDERIZAR PAINÉIS =====
      function renderizarPaineis(paineis) {
        painelContainer.innerHTML = paineis
          .map(
            (painel) => `
        <div class="col-md-6 col-lg-4">
            <div class="card h-100 shadow-sm panel-card">
                <div class="card-body d-flex flex-column">
                    <div class="d-flex justify-content-between align-items-start mb-3">
                        <h5 class="card-title mb-0">
                            <i class="bi bi-grid-3x3-gap me-2 text-primary"></i>
                            ${painel.name || "Sem Título"}
                        </h5>
                        <span class="badge ${painel.active !== false ? 'bg-primary' : 'bg-secondary'}">
                            ${painel.active !== false ? "Ativo" : "Inativo"}
                        </span>
                    </div>
                    
                    <p class="card-text text-muted flex-grow-1">
                        ${painel.description || "Sem descrição"}
                    </p>
                    
                    <div class="mb-2">
                        <span class="badge bg-light text-dark">
                            <i class="bi bi-${painel.type === 'DIVIDED' ? 'layout-split' : 'tv'} me-1"></i>
                            ${painel.type === 'DIVIDED' ? 'Tela Dividida' : 'Tela Cheia'}
                        </span>
                    </div>
                    
                    <div class="mt-auto">
                        <div class="d-flex justify-content-between align-items-center mb-2">
                            <small class="text-muted">
                                <i class="bi bi-calendar-plus me-1"></i>
                                Criado: ${formatarData(painel.createdAt)}
                            </small>
                        </div>
                        <div class="d-flex justify-content-between align-items-center mb-2">
                            <small class="text-muted">
                                <i class="bi bi-calendar-check me-1"></i>
                                Atualizado: ${formatarData(painel.updatedAt)}
                            </small>
                        </div>
                        
                        <!-- Botão principal para abrir o painel -->
                        <div class="d-grid gap-2 mb-2">
                            <button class="btn btn-primary" onclick="abrirPainel(${
                              painel.id
                            })">
                                <i class="bi bi-play-circle me-2"></i>Abrir Painel
                            </button>
                        </div>
                        
                        <!-- Botões de ação secundários -->
                        <div class="d-flex gap-2">
                            <button class="btn btn-outline-secondary btn-sm flex-fill" 
                                    onclick="abrirModalEdicao(${painel.id}, '${(
              painel.name || ""
            ).replace(/'/g, "\\'")}', '${(painel.description || "").replace(
              /'/g,
              "\\'"
            )}')">
                                <i class="bi bi-pencil me-1"></i>Editar
                            </button>
                            <button class="btn btn-outline-danger btn-sm flex-fill" 
                                    onclick="abrirModalExclusao(${
                                      painel.id
                                    }, '${(painel.name || "").replace(
              /'/g,
              "\\'"
            )}')">
                                <i class="bi bi-trash me-1"></i>Excluir
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    `
          )
          .join("");
      }
      // ===== ABRIR PAINEL PARA GERENCIAR MÍDIAS =====
      function abrirPainel(painelId) {
        window.location.href = `painel.html?id=${painelId}`;
      }

      // ===== SALVAR NOVO PAINEL =====
      async function salvarPainel() {
        const name = document.getElementById("panelName").value.trim();
        const description = document
          .getElementById("panelDescription")
          .value.trim();
        const type = document.getElementById("panelType").value;
        const active = document.getElementById("panelActive").checked;
        
        // Campos de exibição
        const showWeather = document.getElementById("showWeather").checked;
        const showNews = document.getElementById("showNews").checked;
        const showLottery = document.getElementById("showLottery").checked;
        const showCoins = document.getElementById("showCoins").checked;
        const showCustomScreen = document.getElementById("showCustomScreen").checked;
        
        // Campos de frequência
        const weatherFrequency = showWeather ? parseInt(document.getElementById("weatherFrequency").value) : null;
        const newsFrequency = showNews ? parseInt(document.getElementById("newsFrequency").value) : null;
        const lotteryFrequency = showLottery ? parseInt(document.getElementById("lotteryFrequency").value) : null;
        const coinsFrequency = showCoins ? parseInt(document.getElementById("coinsFrequency").value) : null;
        const customScreenFrequency = showCustomScreen ? parseInt(document.getElementById("customScreenFrequency").value) : null;
        const customScreenContent = showCustomScreen ? document.getElementById("customScreenContent").value.trim() : null;

        if (!name) {
          mostrarAlerta("erro", "Nome do painel é obrigatório");
          return;
        }

        try {
          
          const resposta = await fetch(
            buildApiUrl(APP_CONFIG.API_ENDPOINTS.PANEL),
            {
              method: "POST",
              headers: {
                "Content-Type": "application/json",
                Authorization: "Bearer " + token,
              },
              body: JSON.stringify({
                name,
                description,
                type,
                active,
                showWeather,
                showNews,
                showLottery,
                showCoins,
                showCustomScreen,
                weatherFrequency,
                newsFrequency,
                lotteryFrequency,
                coinsFrequency,
                customScreenFrequency,
                customScreenContent
              }),
            }
          );

          if (resposta.ok) {
            const painel = await resposta.json();
            mostrarAlerta(
              "sucesso",
              `Painel "${painel.name}" criado com sucesso!`
            );

            // Fechar modal e limpar formulário
            const modal = bootstrap.Modal.getInstance(
              document.getElementById("addPanelModal")
            );
            modal.hide();
            
            // Garantir que o backdrop seja removido
            setTimeout(() => {
              const backdrop = document.querySelector('.modal-backdrop');
              if (backdrop) {
                backdrop.remove();
              }
              document.body.classList.remove('modal-open');
              document.body.style.overflow = '';
              document.body.style.paddingRight = '';
            }, 300);
            
            document.getElementById("addPanelForm").reset();
            
            // Ocultar todos os campos de frequência
            document.getElementById("weatherFrequencyDiv").style.display = 'none';
            document.getElementById("newsFrequencyDiv").style.display = 'none';
            document.getElementById("lotteryFrequencyDiv").style.display = 'none';
            document.getElementById("coinsFrequencyDiv").style.display = 'none';
            document.getElementById("customScreenFrequencyDiv").style.display = 'none';

            // Recarregar painéis
            carregarPaineis();
          } else {
            const erro = await resposta.json();
            mostrarAlerta(
              "erro",
              "Erro ao criar painel: " + (erro.error || "Erro desconhecido")
            );
          }
        } catch (error) {
          console.error("Erro ao criar painel:", error);
          mostrarAlerta("erro", "Erro de conexão ao criar painel");
        }
      }
      // ===== ABRIR MODAL DE EDIÇÃO =====
      async function abrirModalEdicao(id, name, description) {
        document.getElementById("editPanelId").value = id;
        document.getElementById("editPanelName").value = name;
        document.getElementById("editPanelDescription").value =
          description || "";

        // Carregar dados completos do painel
         try {
           const resposta = await fetch(
             `${buildApiUrl(APP_CONFIG.API_ENDPOINTS.PANEL)}/${id}`,
             {
               headers: {
                 Authorization: "Bearer " + token,
               },
             }
           );

          if (resposta.ok) {
            const painel = await resposta.json();
            
            // Preencher campos do modal
            document.getElementById("editPanelId").value = painel.id;
            document.getElementById("editPanelName").value = painel.name || "";
            document.getElementById("editPanelDescription").value = painel.description || "";
            document.getElementById("editPanelType").value = painel.type || "FULL_SCREEN";
            document.getElementById("editPanelActive").checked = painel.active !== false;
            
            // Status do painel
            const activeCheckbox = document.getElementById("editPanelActive");
            activeCheckbox.checked = painel.active !== false; // true por padrão se não especificado
            updatePanelStatusText();
            
            // Selecionar o tipo de painel visualmente (com delay para garantir que os elementos estejam carregados)
            setTimeout(() => {
              selectPanelType(painel.type || "FULL_SCREEN", 'edit');
            }, 100);
            
            // Configurações de exibição
            document.getElementById("editShowWeather").checked = painel.showWeather || false;
            document.getElementById("editShowNews").checked = painel.showNews || false;
            document.getElementById("editShowLottery").checked = painel.showLottery || false;
            document.getElementById("editShowCoins").checked = painel.showCoins || false;
            document.getElementById("editShowCustomScreen").checked = painel.showCustomScreen || false;
            
            // Frequências
            document.getElementById("editWeatherFrequency").value = painel.weatherFrequency || 10;
            document.getElementById("editNewsFrequency").value = painel.newsFrequency || 10;
            document.getElementById("editLotteryFrequency").value = painel.lotteryFrequency || 10;
            document.getElementById("editCoinsFrequency").value = painel.coinsFrequency || 10;
            document.getElementById("editCustomScreenFrequency").value = painel.customScreenFrequency || 2;
            document.getElementById("editCustomScreenContent").value = painel.customScreenContent || "";
            
            // Mostrar/ocultar campos de frequência baseado nos checkboxes
            toggleEditFrequencyInput('Weather');
            toggleEditFrequencyInput('News');
            toggleEditFrequencyInput('Lottery');
            toggleEditFrequencyInput('Coins');
            toggleEditFrequencyInput('CustomScreen');
          }
        } catch (error) {
          console.error("Erro ao carregar dados do painel:", error);
        }

        const modal = new bootstrap.Modal(
          document.getElementById("editPanelModal")
        );
        modal.show();
      }

      // ===== SALVAR EDIÇÃO DO PAINEL =====
      async function salvarEdicaoPainel() {
        const id = document.getElementById("editPanelId").value;
        const name = document.getElementById("editPanelName").value.trim();
        const description = document
          .getElementById("editPanelDescription")
          .value.trim();
        const type = document.getElementById("editPanelType").value;
        const active = document.getElementById("editPanelActive").checked;
        
        // Campos de exibição
        const showWeather = document.getElementById("editShowWeather").checked;
        const showNews = document.getElementById("editShowNews").checked;
        const showLottery = document.getElementById("editShowLottery").checked;
        const showCoins = document.getElementById("editShowCoins").checked;
        const showCustomScreen = document.getElementById("editShowCustomScreen").checked;
        
        // Campos de frequência
        const weatherFrequency = showWeather ? parseInt(document.getElementById("editWeatherFrequency").value) : null;
        const newsFrequency = showNews ? parseInt(document.getElementById("editNewsFrequency").value) : null;
        const lotteryFrequency = showLottery ? parseInt(document.getElementById("editLotteryFrequency").value) : null;
        const coinsFrequency = showCoins ? parseInt(document.getElementById("editCoinsFrequency").value) : null;
        const customScreenFrequency = showCustomScreen ? parseInt(document.getElementById("editCustomScreenFrequency").value) : null;
        const customScreenContent = showCustomScreen ? document.getElementById("editCustomScreenContent").value.trim() : null;

        if (!name) {
          mostrarAlerta("erro", "Nome do painel é obrigatório");
          return;
        }

        try {
          const resposta = await fetch(
            `${buildApiUrl(APP_CONFIG.API_ENDPOINTS.PANEL)}/${id}`,
            {
              method: "PUT",
              headers: {
                "Content-Type": "application/json",
                Authorization: "Bearer " + token,
              },
              body: JSON.stringify({
                name,
                description,
                type,
                active,
                showWeather,
                showNews,
                showLottery,
                showCoins,
                showCustomScreen,
                weatherFrequency,
                newsFrequency,
                lotteryFrequency,
                coinsFrequency,
                customScreenFrequency,
                customScreenContent
              }),
            }
          );

          if (resposta.ok) {
            const painel = await resposta.json();
            mostrarAlerta(
              "sucesso",
              `Painel "${painel.name}" atualizado com sucesso!`
            );

            // Fechar modal
            const modalElement = document.getElementById("editPanelModal");
            const modal = bootstrap.Modal.getInstance(modalElement);
            
            // Remover aria-hidden antes de fechar
            modalElement.removeAttribute('aria-hidden');
            
            modal.hide();
            
            // Garantir que o backdrop seja removido e aria-hidden seja restaurado
            setTimeout(() => {
              const backdrop = document.querySelector('.modal-backdrop');
              if (backdrop) {
                backdrop.remove();
              }
              document.body.classList.remove('modal-open');
              document.body.style.overflow = '';
              document.body.style.paddingRight = '';
              
              // Restaurar aria-hidden após fechar
              modalElement.setAttribute('aria-hidden', 'true');
            }, 300);

            // Recarregar painéis
            carregarPaineis();
          } else {
            const erro = await resposta.json();
            mostrarAlerta(
              "erro",
              "Erro ao atualizar painel: " + (erro.error || "Erro desconhecido")
            );
          }
        } catch (error) {
          console.error("Erro ao atualizar painel:", error);
          mostrarAlerta("erro", "Erro de conexão ao atualizar painel");
        }
      }

      // ===== ABRIR MODAL DE EXCLUSÃO =====
      function abrirModalExclusao(id, name) {
        document.getElementById("deletePanelId").value = id;
        document.getElementById("deletePanelName").textContent = name;

        const modal = new bootstrap.Modal(
          document.getElementById("deletePanelModal")
        );
        modal.show();
      }

      // ===== CONFIRMAR EXCLUSÃO DO PAINEL =====
      async function confirmarExclusaoPainel() {
        const id = document.getElementById("deletePanelId").value;
        const name = document.getElementById("deletePanelName").textContent;

        try {
          const resposta = await fetch(
            `${buildApiUrl(APP_CONFIG.API_ENDPOINTS.PANEL)}/${id}`,
            {
              method: "DELETE",
              headers: {
                Authorization: "Bearer " + token,
              },
            }
          );

          if (resposta.ok) {
            mostrarAlerta("sucesso", `Painel "${name}" excluído com sucesso!`);

            // Fechar modal
            const modal = bootstrap.Modal.getInstance(
              document.getElementById("deletePanelModal")
            );
            modal.hide();
            
            // Garantir que o backdrop seja removido
            setTimeout(() => {
              const backdrop = document.querySelector('.modal-backdrop');
              if (backdrop) {
                backdrop.remove();
              }
              document.body.classList.remove('modal-open');
              document.body.style.overflow = '';
              document.body.style.paddingRight = '';
            }, 300);

            // Recarregar painéis
            carregarPaineis();
          } else {
            let errorMsg = "Erro desconhecido";
            try {
              const contentType = resposta.headers.get("content-type");
              if (
                contentType &&
                contentType.indexOf("application/json") !== -1
              ) {
                const erro = await resposta.json();
                errorMsg = erro.error || erro.message || errorMsg;
              } else {
                // Se não for JSON, tenta buscar texto (HTML ou outra coisa)
                errorMsg = await resposta.text();
              }
            } catch (e) {
              // Caso dê erro ao ler a resposta
              errorMsg = "Erro inesperado ao analisar a resposta do servidor";
            }
            mostrarAlerta("erro", "Erro ao excluir painel: " + errorMsg);
          }
        } catch (error) {
          console.error("Erro ao excluir painel:", error);
          mostrarAlerta("erro", "Erro de conexão ao excluir painel");
        }
      }

      // Função para selecionar tipo de painel
      function selectPanelType(type, modalType) {
        // Determinar o contexto do modal
        const modalSelector = modalType === 'edit' ? '#editPanelModal' : '#addPanelModal';
        
        // Remove seleção de todos os cards do modal específico
        const cards = document.querySelectorAll(`${modalSelector} .panel-type-card`);
        cards.forEach(card => {
          card.style.border = '2px solid #dee2e6';
          card.style.backgroundColor = '';
          const icon = card.querySelector('i');
          const title = card.querySelector('h6');
          if (icon) icon.style.color = '#6c757d';
          if (title) title.style.color = '';
        });
        
        // Seleciona o card clicado no modal específico
        const selectedCard = document.querySelector(`${modalSelector} [data-type="${type}"]`);
        if (selectedCard) {
          selectedCard.style.border = '2px solid #0d6efd';
          selectedCard.style.backgroundColor = '#f8f9ff';
          const icon = selectedCard.querySelector('i');
          const title = selectedCard.querySelector('h6');
          if (icon) icon.style.color = '#0d6efd';
          if (title) title.style.color = '#0d6efd';
        }
        
        // Atualiza o input hidden
        if (modalType === 'edit') {
          document.getElementById('editPanelType').value = type;
        } else {
          document.getElementById('panelType').value = type;
        }
      }

      // Inicializar seleção padrão quando os modais abrem
      document.getElementById('addPanelModal').addEventListener('show.bs.modal', function () {
        setTimeout(() => {
          selectPanelType('FULL_SCREEN', 'add');
        }, 100);
      });
      
      document.getElementById('editPanelModal').addEventListener('show.bs.modal', function () {
        setTimeout(() => {
          const currentType = document.getElementById('editPanelType').value || 'FULL_SCREEN';
          selectPanelType(currentType, 'edit');
        }, 100);
      });

      // Função para atualizar o texto do status do painel
      function updatePanelStatusText() {
        const checkbox = document.getElementById('editPanelActive');
        const statusText = document.getElementById('editPanelStatusText');
        if (checkbox.checked) {
          statusText.textContent = 'Ativo';
          statusText.className = 'text-success';
        } else {
          statusText.textContent = 'Inativo';
          statusText.className = 'text-danger';
        }
      }

      // Event listener para o switch de status
      document.getElementById('editPanelActive').addEventListener('change', updatePanelStatusText);

      // Implementar busca em tempo real
      document.getElementById('searchInput').addEventListener('input', function(e) {
        const searchTerm = e.target.value.toLowerCase();
        const panelCards = document.querySelectorAll('.panel-card');
        let visibleCount = 0;
        
        panelCards.forEach(card => {
          const panelName = card.querySelector('.card-title')?.textContent.toLowerCase() || '';
          const panelDescription = card.querySelector('.text-muted')?.textContent.toLowerCase() || '';
          const panelType = card.querySelector('.badge')?.textContent.toLowerCase() || '';
          
          if (panelName.includes(searchTerm) || panelDescription.includes(searchTerm) || panelType.includes(searchTerm)) {
            card.style.display = 'block';
            visibleCount++;
          } else {
            card.style.display = 'none';
          }
        });
        
        // Atualizar contador com painéis visíveis
        const totalPanelsElement = document.getElementById('totalPanels');
        if (searchTerm.trim() === '') {
          // Se não há busca, mostrar total real
          totalPanelsElement.textContent = panelCards.length;
        } else {
          // Se há busca, mostrar painéis filtrados
          totalPanelsElement.textContent = visibleCount;
        }
        
        // Mostrar mensagem se nenhum painel for encontrado
        const noResultsMsg = document.getElementById('noResultsMessage');
        
        if (visibleCount === 0 && searchTerm.trim() !== '') {
          if (!noResultsMsg) {
            const message = document.createElement('div');
            message.id = 'noResultsMessage';
            message.className = 'text-center text-muted py-5';
            message.innerHTML = '<i class="bi bi-search" style="font-size: 3rem;"></i><h5 class="mt-3">Nenhum painel encontrado</h5><p>Tente ajustar os termos da busca</p>';
            document.getElementById('painelContainer').appendChild(message);
          }
        } else if (noResultsMsg) {
          noResultsMsg.remove();
        }
      });

    </script>

    <!-- Modal de Configuração -->
    <div class="modal fade" id="configModal" tabindex="-1" aria-labelledby="configModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="configModalLabel">
              <i class="bi bi-gear me-2"></i>Configurações
            </h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            <!-- Informações do usuário -->
            <div class="mb-4">
              <h6 class="fw-bold mb-3">
                <i class="bi bi-person-circle me-2"></i>Usuário Logado
              </h6>
              <div class="d-flex align-items-center p-3 bg-light rounded">
                <div class="me-3">
                  <i class="bi bi-person-circle text-primary" style="font-size: 2rem;"></i>
                </div>
                <div>
                  <div class="fw-semibold" id="userNameModal">Usuário</div>
                  <div class="text-muted small" id="userEmailModal">usuario@email.com</div>
                </div>
              </div>
            </div>
            
            <!-- Configurações de tema -->
            <div class="mb-4">
              <h6 class="fw-bold mb-3">
                <i class="bi bi-palette me-2"></i>Aparência
              </h6>
              <div class="form-check form-switch">
                <input class="form-check-input" type="checkbox" id="themeToggleModal">
                <label class="form-check-label" for="themeToggleModal">
                  <i class="bi bi-moon me-2"></i>Modo Escuro
                </label>
              </div>
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
              <i class="bi bi-x-circle me-1"></i>Fechar
            </button>
            <button type="button" class="btn btn-danger" id="logoutBtnModal">
              <i class="bi bi-box-arrow-right me-1"></i>Sair
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Configuração da aplicação -->
    <script src="../js/config.js"></script>
    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

  </body>
</html>
