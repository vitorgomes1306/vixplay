<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Vix Mídia - Dashboard</title>
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />
  <!-- Bootstrap Icons -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" />
  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <!-- Custom CSS -->
  <link rel="stylesheet" href="modern-dashboard.css">
</head>

<body>
  <!-- Overlay para sidebar em dispositivos móveis -->
  <div class="sidebar-overlay"></div>

  <div class="wrapper">
    <!-- Sidebar -->
    <nav class="sidebar" id="sidebar">
      <div class="sidebar-header">
        <img src="../img/vixmidia_dark.png" alt="Logo VixMídia" class="img-fluid">
        <button class="sidebar-toggle">
          <i class="bi bi-chevron-left"></i>
        </button>
      </div>

      <ul class="list-unstyled">
        <li>
          <a class="sidebar-link" href="dashboard.php">
            <i class="bi bi-speedometer2"></i>
            <span>Dashboard</span>
          </a>
        </li>
        <li>
          <a class="sidebar-link" href="dispositivos.php">
            <i class="bi bi-tv"></i>
            <span>Dispositivos</span>
          </a>
        </li>
        <li>
          <a class="sidebar-link active" href="paineis.php">
            <i class="bi bi-pip-fill"></i>
            <span>Painéis</span>
          </a>
        </li>
        <li>
          <a class="sidebar-link" href="midias.php">
            <i class="bi bi-collection-play"></i>
            <span>Mídias</span>
          </a>
        </li>
        <li>
          <a class="sidebar-link" href="clientes.php">
            <i class="bi bi-person-video2"></i>
            <span>Clientes</span>
          </a>
        </li>
        <li>
          <a class="sidebar-link" href="relatorios.php">
            <i class="bi bi-clipboard2-pulse"></i>
            <span>Relatórios</span>
          </a>
        </li>
      </ul>

      <hr>

      <ul class="list-unstyled">
        <li>
          <a class="sidebar-link" href="configuracoes.php">
            <i class="bi bi-gear"></i>
            <span>Configurações</span>
          </a>
        </li>
        <li>
          <a class="sidebar-link" href="../index.php">
            <i class="bi bi-box-arrow-left"></i>
            <span>Sair</span>
          </a>
        </li>
      </ul>

      <!-- Toggle de tema claro/escuro -->
      <div class="mt-auto px-3 py-2">
        <div class="form-check form-switch d-flex align-items-center">
          <input class="form-check-input me-2" type="checkbox" id="themeToggle">
          <label class="form-check-label text-white" for="themeToggle">
            <i class="bi bi-moon"></i>
            <span class="ms-2">Modo Escuro</span>
          </label>
        </div>
      </div>
    </nav>

    <!-- Conteúdo Principal -->
    <main class="content">
      <!-- Cabeçalho da Página -->
      <div class="page-header">
        <div>
          <h1 class="page-title">Painéis</h1>
          <p class="page-subtitle">Gerencie seus painéis de mídia digital</p>
        </div>
        <div class="d-flex align-items-center">
          <!-- Barra de pesquisa -->
          <div class="search-container me-3 position-relative">
            <input type="text" class="form-control search-input" placeholder="Buscar painéis...">
            <i class="bi bi-search search-icon"></i>
            <div class="search-results shadow-sm"></div>
          </div>
          <!-- Botão de adicionar painel -->
          <button class="btn btn-primary me-2" data-bs-toggle="modal" data-bs-target="#addPanelModal">
            <i class="bi bi-plus-circle me-2"></i> Adicionar Painel
          </button>
          <!-- Ícone de configuração -->
          <button class="btn btn-outline-secondary" data-bs-toggle="modal" data-bs-target="#configModal" title="Configurações">
            <i class="bi bi-gear"></i>
          </button>
        </div>
      </div>

      <!-- Alertas -->
      <div class="alert-container" id="alertContainer"></div>

      <!-- Cards de Estatísticas -->
      <div class="row row-cols-1 row-cols-md-3 g-4 mb-4">
        <!-- Card de Total de Painéis -->
        <div class="col animate-entry">
          <div class="card stats-card">
            <div class="card-body">
              <div class="stats-icon" style="background-color: rgba(67, 97, 238, 0.1); color: var(--primary-color);">
                <i class="bi bi-pip"></i>
              </div>
              <h5 class="stats-label">Total de Painéis</h5>
              <div class="stats-value" id="totalPaineis">0</div>
              <div class="stats-trend up">
                <i class="bi bi-arrow-up me-1"></i>
                <span>12% desde o último mês</span>
              </div>
            </div>
          </div>
        </div>
        <!-- Card de Dispositivos Conectados -->
        <div class="col animate-entry">
          <div class="card stats-card">
            <div class="card-body">
              <div class="stats-icon" style="background-color: rgba(76, 175, 80, 0.1); color: var(--success-color);">
                <i class="bi bi-tv"></i>
              </div>
              <h5 class="stats-label">Dispositivos Conectados</h5>
              <div class="stats-value" id="totalDispositivos">0</div>
              <div class="stats-trend up">
                <i class="bi bi-arrow-up me-1"></i>
                <span>5% desde o último mês</span>
              </div>
            </div>
          </div>
        </div>
        <!-- Card de Visualizações -->
        <div class="col animate-entry">
          <div class="card stats-card">
            <div class="card-body">
              <div class="stats-icon" style="background-color: rgba(76, 201, 240, 0.1); color: var(--accent-color);">
                <i class="bi bi-eye"></i>
              </div>
              <h5 class="stats-label">Total de Visualizações</h5>
              <div class="stats-value" id="totalVisualizacoes">0</div>
              <div class="stats-trend up">
                <i class="bi bi-arrow-up me-1"></i>
                <span>18% desde o último mês</span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Gráficos -->
      <div class="row g-4 mb-4">
        <!-- Gráfico de Visualizações -->
        <div class="col-lg-8 animate-entry">
          <div class="card h-100">
            <div class="card-header">
              <h5 class="card-title">Visualizações por Período</h5>
              <div class="dropdown">
                <button class="btn btn-sm btn-outline-secondary dropdown-toggle" type="button" id="chartPeriodDropdown" data-bs-toggle="dropdown" aria-expanded="false">
                  Últimos 7 dias
                </button>
                <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="chartPeriodDropdown">
                  <li><a class="dropdown-item active" href="#">Últimos 7 dias</a></li>
                  <li><a class="dropdown-item" href="#">Últimos 30 dias</a></li>
                  <li><a class="dropdown-item" href="#">Este ano</a></li>
                </ul>
              </div>
            </div>
            <div class="card-body">
              <canvas id="visitorsChart" height="250"></canvas>
            </div>
          </div>
        </div>
        <!-- Gráfico de Dispositivos -->
        <div class="col-lg-4 animate-entry">
          <div class="card h-100">
            <div class="card-header">
              <h5 class="card-title">Dispositivos</h5>
            </div>
            <div class="card-body d-flex justify-content-center align-items-center">
              <canvas id="deviceChart" height="250"></canvas>
            </div>
          </div>
        </div>
      </div>

      <!-- Lista de Painéis -->
      <div class="row mb-4">
        <div class="col-12">
          <div class="card animate-entry">
            <div class="card-header">
              <h5 class="card-title">Seus Painéis</h5>
              <div class="d-flex">
                <div class="dropdown me-2">
                  <button class="btn btn-sm btn-outline-secondary dropdown-toggle" type="button" id="filterDropdown" data-bs-toggle="dropdown" aria-expanded="false">
                    <i class="bi bi-funnel me-1"></i> Filtrar
                  </button>
                  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="filterDropdown">
                    <li><a class="dropdown-item active" href="#">Todos</a></li>
                    <li><a class="dropdown-item" href="#">Ativos</a></li>
                    <li><a class="dropdown-item" href="#">Inativos</a></li>
                    <li><hr class="dropdown-divider"></li>
                    <li><a class="dropdown-item" href="#">Tela Cheia</a></li>
                    <li><a class="dropdown-item" href="#">Tela Dividida</a></li>
                  </ul>
                </div>
                <div class="dropdown">
                  <button class="btn btn-sm btn-outline-secondary dropdown-toggle" type="button" id="sortDropdown" data-bs-toggle="dropdown" aria-expanded="false">
                    <i class="bi bi-sort-down me-1"></i> Ordenar
                  </button>
                  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="sortDropdown">
                    <li><a class="dropdown-item active" href="#">Mais recentes</a></li>
                    <li><a class="dropdown-item" href="#">Mais antigos</a></li>
                    <li><a class="dropdown-item" href="#">Nome (A-Z)</a></li>
                    <li><a class="dropdown-item" href="#">Nome (Z-A)</a></li>
                  </ul>
                </div>
              </div>
            </div>
            <div class="card-body">
              <div class="row" id="loading" style="display: none; text-align: center">
                <div class="col-12">
                  <div class="loader mx-auto mt-5 mb-3"></div>
                  <p class="text-muted">Carregando painéis...</p>
                </div>
              </div>

              <div class="row" id="noPanels" style="display: none">
                <div class="col-12">
                  <div class="alert alert-info text-center mt-3">
                    <i class="bi bi-exclamation-circle me-2"></i>
                    Nenhum painel encontrado. Crie seu primeiro painel para começar.
                  </div>
                </div>
              </div>

              <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4" id="painelContainer"></div>
            </div>
          </div>
        </div>
      </div>

      <!-- Atividade Recente -->
      <div class="row mb-4">
        <div class="col-12">
          <div class="card animate-entry">
            <div class="card-header">
              <h5 class="card-title">Atividade Recente</h5>
            </div>
            <div class="card-body p-0">
              <div class="table-responsive">
                <table class="table mb-0">
                  <thead>
                    <tr>
                      <th>Ação</th>
                      <th>Painel</th>
                      <th>Usuário</th>
                      <th>Data</th>
                      <th>Status</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td><span class="badge bg-success">Criação</span></td>
                      <td>Painel Principal</td>
                      <td>Admin</td>
                      <td>15/10/2023</td>
                      <td><span class="badge bg-success">Concluído</span></td>
                    </tr>
                    <tr>
                      <td><span class="badge bg-primary">Atualização</span></td>
                      <td>Painel de Notícias</td>
                      <td>Admin</td>
                      <td>20/10/2023</td>
                      <td><span class="badge bg-success">Concluído</span></td>
                    </tr>
                    <tr>
                      <td><span class="badge bg-danger">Exclusão</span></td>
                      <td>Painel Temporário</td>
                      <td>Admin</td>
                      <td>22/10/2023</td>
                      <td><span class="badge bg-success">Concluído</span></td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
            <div class="card-footer text-center">
              <a href="#" class="btn btn-sm btn-outline-primary">Ver todas as atividades</a>
            </div>
          </div>
        </div>
      </div>

      <!-- Botão flutuante para dispositivos móveis -->
      <button class="mobile-toggle d-lg-none">
        <i class="bi bi-list"></i>
      </button>
    </main>
  </div>

  <!-- Modal para Adicionar Painel -->
  <div class="modal fade" id="addPanelModal" tabindex="-1" aria-labelledby="addPanelModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="addPanelModalLabel">
            <i class="bi bi-plus-circle me-2"></i>Adicionar Painel
          </h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <form id="addPanelForm">
            <div class="mb-3">
              <label for="panelName" class="form-label">Nome do Painel <span class="text-danger">*</span></label>
              <input type="text" class="form-control" id="panelName" required placeholder="Digite o nome do painel" />
            </div>
            <div class="mb-3">
              <label for="panelDescription" class="form-label">Descrição</label>
              <textarea class="form-control" id="panelDescription" rows="2"
                placeholder="Digite uma breve descrição"></textarea>
            </div>
            <div class="mb-3">
              <label class="form-label">Tipo de Layout <span class="text-danger">*</span></label>
              <div class="row g-3">
                <div class="col-md-6">
                  <div class="card h-100 cursor-pointer layout-option">
                    <input class="form-check-input position-absolute m-2" type="radio" name="panelType" id="fullScreenType" value="FULL_SCREEN" checked />
                    <div class="card-body text-center">
                      <i class="bi bi-fullscreen display-4 mb-3"></i>
                      <h6>Tela Cheia</h6>
                      <p class="text-muted small">Exibe conteúdo em tela cheia</p>
                    </div>
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="card h-100 cursor-pointer layout-option">
                    <input class="form-check-input position-absolute m-2" type="radio" name="panelType" id="dividedType" value="DIVIDED" />
                    <div class="card-body text-center">
                      <i class="bi bi-layout-split display-4 mb-3"></i>
                      <h6>Tela Dividida</h6>
                      <p class="text-muted small">Exibe múltiplos conteúdos</p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="mb-3">
              <label class="form-label">Conteúdo do Painel</label>
              <div class="row g-3">
                <!-- Previsão do Tempo -->
                <div class="col-md-6">
                  <div class="card h-100">
                    <div class="card-body">
                      <div class="form-check form-switch">
                        <input class="form-check-input" type="checkbox" id="showWeather">
                        <label class="form-check-label" for="showWeather">Previsão do Tempo</label>
                      </div>
                      <div class="mt-2" id="weatherFrequencyGroup" style="display: none">
                        <label for="weatherFrequency" class="form-label">Frequência (minutos)</label>
                        <input type="number" class="form-control" id="weatherFrequency" value="10" min="1" disabled />
                      </div>
                    </div>
                  </div>
                </div>
                <!-- Notícias -->
                <div class="col-md-6">
                  <div class="card h-100">
                    <div class="card-body">
                      <div class="form-check form-switch">
                        <input class="form-check-input" type="checkbox" id="showNews">
                        <label class="form-check-label" for="showNews">Notícias</label>
                      </div>
                      <div class="mt-2" id="newsFrequencyGroup" style="display: none">
                        <label for="newsFrequency" class="form-label">Frequência (minutos)</label>
                        <input type="number" class="form-control" id="newsFrequency" value="10" min="1" disabled />
                      </div>
                    </div>
                  </div>
                </div>
                <!-- Mega-Sena -->
                <div class="col-md-6">
                  <div class="card h-100">
                    <div class="card-body">
                      <div class="form-check form-switch">
                        <input class="form-check-input" type="checkbox" id="showLottery">
                        <label class="form-check-label" for="showLottery">Mega-Sena</label>
                      </div>
                      <div class="mt-2" id="lotteryFrequencyGroup" style="display: none">
                        <label for="lotteryFrequency" class="form-label">Frequência (minutos)</label>
                        <input type="number" class="form-control" id="lotteryFrequency" value="10" min="1" disabled />
                      </div>
                    </div>
                  </div>
                </div>
                <!-- Moedas -->
                <div class="col-md-6">
                  <div class="card h-100">
                    <div class="card-body">
                      <div class="form-check form-switch">
                        <input class="form-check-input" type="checkbox" id="showCoins">
                        <label class="form-check-label" for="showCoins">Moedas</label>
                      </div>
                      <div class="mt-2" id="coinsFrequencyGroup" style="display: none">
                        <label for="coinsFrequency" class="form-label">Frequência (minutos)</label>
                        <input type="number" class="form-control" id="coinsFrequency" value="10" min="1" disabled />
                      </div>
                    </div>
                  </div>
                </div>
                <!-- Tela Personalizada -->
                <div class="col-12">
                  <div class="card h-100">
                    <div class="card-body">
                      <div class="form-check form-switch">
                        <input class="form-check-input" type="checkbox" id="showCustomScreen">
                        <label class="form-check-label" for="showCustomScreen">Tela de Avisos Personalizada</label>
                      </div>
                      <div class="mt-2" id="customScreenFrequencyGroup" style="display: none">
                        <label for="customScreenFrequency" class="form-label">Frequência (minutos)</label>
                        <input type="number" class="form-control" id="customScreenFrequency" value="2" min="1" disabled />
                      </div>
                      <div class="mt-2" id="customScreenContentGroup" style="display: none">
                        <label for="customScreenContent" class="form-label">Conteúdo Personalizado (HTML/JSON)</label>
                        <textarea class="form-control" id="customScreenContent" rows="3"
                          placeholder="Digite o conteúdo personalizado (HTML ou JSON)" disabled></textarea>
                        <button type="button" class="btn btn-outline-primary mt-2" onclick="abrirModalCustomScreen()">
                          <i class="bi bi-tv me-2"></i> Selecionar Tela Personalizada
                        </button>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">
            <i class="bi bi-x-circle me-2"></i> Cancelar
          </button>
          <button type="button" class="btn btn-primary" onclick="salvarPainel()">
            <i class="bi bi-check-circle me-2"></i> Salvar
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal para Editar Painel -->
  <div class="modal fade" id="editPanelModal" tabindex="-1" aria-labelledby="editPanelModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="editPanelModalLabel">
            <i class="bi bi-pencil me-2"></i>Editar Painel
          </h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <form id="editPanelForm">
            <input type="hidden" id="editPanelId" />
            <div class="mb-3">
              <label for="editPanelName" class="form-label">Nome do Painel <span class="text-danger">*</span></label>
              <input type="text" class="form-control" id="editPanelName" required
                placeholder="Digite o nome do painel" />
            </div>
            <div class="mb-3">
              <label for="editPanelDescription" class="form-label">Descrição</label>
              <textarea class="form-control" id="editPanelDescription" rows="2"
                placeholder="Digite uma breve descrição"></textarea>
            </div>
            <div class="mb-3">
              <label class="form-label">Tipo de Layout <span class="text-danger">*</span></label>
              <div class="row g-3">
                <div class="col-md-6">
                  <div class="card h-100 cursor-pointer layout-option">
                    <input class="form-check-input position-absolute m-2" type="radio" name="editPanelType" id="editFullScreenType" value="FULL_SCREEN" checked />
                    <div class="card-body text-center">
                      <i class="bi bi-fullscreen display-4 mb-3"></i>
                      <h6>Tela Cheia</h6>
                      <p class="text-muted small">Exibe conteúdo em tela cheia</p>
                    </div>
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="card h-100 cursor-pointer layout-option">
                    <input class="form-check-input position-absolute m-2" type="radio" name="editPanelType" id="editDividedType" value="DIVIDED" />
                    <div class="card-body text-center">
                      <i class="bi bi-layout-split display-4 mb-3"></i>
                      <h6>Tela Dividida</h6>
                      <p class="text-muted small">Exibe múltiplos conteúdos</p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="mb-3">
              <label class="form-label">Conteúdo do Painel</label>
              <div class="row g-3">
                <!-- Previsão do Tempo -->
                <div class="col-md-6">
                  <div class="card h-100">
                    <div class="card-body">
                      <div class="form-check form-switch">
                        <input class="form-check-input" type="checkbox" id="editShowWeather">
                        <label class="form-check-label" for="editShowWeather">Previsão do Tempo</label>
                      </div>
                      <div class="mt-2" id="editWeatherFrequencyGroup" style="display: none">
                        <label for="editWeatherFrequency" class="form-label">Frequência (minutos)</label>
                        <input type="number" class="form-control" id="editWeatherFrequency" value="10" min="1" disabled />
                      </div>
                    </div>
                  </div>
                </div>
                <!-- Notícias -->
                <div class="col-md-6">
                  <div class="card h-100">
                    <div class="card-body">
                      <div class="form-check form-switch">
                        <input class="form-check-input" type="checkbox" id="editShowNews">
                        <label class="form-check-label" for="editShowNews">Notícias</label>
                      </div>
                      <div class="mt-2" id="editNewsFrequencyGroup" style="display: none">
                        <label for="editNewsFrequency" class="form-label">Frequência (minutos)</label>
                        <input type="number" class="form-control" id="editNewsFrequency" value="10" min="1" disabled />
                      </div>
                    </div>
                  </div>
                </div>
                <!-- Mega-Sena -->
                <div class="col-md-6">
                  <div class="card h-100">
                    <div class="card-body">
                      <div class="form-check form-switch">
                        <input class="form-check-input" type="checkbox" id="editShowLottery">
                        <label class="form-check-label" for="editShowLottery">Mega-Sena</label>
                      </div>
                      <div class="mt-2" id="editLotteryFrequencyGroup" style="display: none">
                        <label for="editLotteryFrequency" class="form-label">Frequência (minutos)</label>
                        <input type="number" class="form-control" id="editLotteryFrequency" value="10" min="1" disabled />
                      </div>
                    </div>
                  </div>
                </div>
                <!-- Moedas -->
                <div class="col-md-6">
                  <div class="card h-100">
                    <div class="card-body">
                      <div class="form-check form-switch">
                        <input class="form-check-input" type="checkbox" id="editShowCoins">
                        <label class="form-check-label" for="editShowCoins">Moedas</label>
                      </div>
                      <div class="mt-2" id="editCoinsFrequencyGroup" style="display: none">
                        <label for="editCoinsFrequency" class="form-label">Frequência (minutos)</label>
                        <input type="number" class="form-control" id="editCoinsFrequency" value="10" min="1" disabled />
                      </div>
                    </div>
                  </div>
                </div>
                <!-- Tela Personalizada -->
                <div class="col-12">
                  <div class="card h-100">
                    <div class="card-body">
                      <div class="form-check form-switch">
                        <input class="form-check-input" type="checkbox" id="editShowCustomScreen">
                        <label class="form-check-label" for="editShowCustomScreen">Tela de Avisos Personalizada</label>
                      </div>
                      <div class="mt-2" id="editCustomScreenFrequencyGroup" style="display: none">
                        <label for="editCustomScreenFrequency" class="form-label">Frequência (minutos)</label>
                        <input type="number" class="form-control" id="editCustomScreenFrequency" value="2" min="1" disabled />
                      </div>
                      <div class="mt-2" id="editCustomScreenContentGroup" style="display: none">
                        <label for="editCustomScreenContent" class="form-label">Conteúdo Personalizado (HTML/JSON)</label>
                        <textarea class="form-control" id="editCustomScreenContent" rows="3"
                          placeholder="Digite o conteúdo personalizado (HTML ou JSON)" disabled></textarea>
                        <button type="button" class="btn btn-outline-primary mt-2" onclick="abrirModalCustomScreen()">
                          <i class="bi bi-tv me-2"></i> Selecionar Tela Personalizada
                        </button>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">
            <i class="bi bi-x-circle me-2"></i> Cancelar
          </button>
          <button type="button" class="btn btn-primary" onclick="salvarEdicaoPainel()">
            <i class="bi bi-check-circle me-2"></i> Salvar Alterações
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal para Excluir Painel -->
  <div class="modal fade" id="deletePanelModal" tabindex="-1" aria-labelledby="deletePanelModalLabel"
    aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="deletePanelModalLabel">
            <i class="bi bi-trash me-2"></i>Excluir Painel
          </h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <input type="hidden" id="deletePanelId" />
          <p>
            Tem certeza que deseja excluir o painel
            <strong id="deletePanelName"></strong>? Esta ação não pode ser
            desfeita.
          </p>
          <div class="alert alert-warning" role="alert">
            <i class="bi bi-exclamation-triangle me-2"></i>
            Todos os dados associados a este painel serão permanentemente
            excluídos.
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">
            <i class="bi bi-x-circle me-2"></i> Cancelar
          </button>
          <button type="button" class="btn btn-danger" onclick="confirmarExclusaoPainel()">
            <i class="bi bi-trash me-2"></i> Excluir
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal para Gerenciar Telas Personalizadas (CustomScreen) -->
  <div class="modal fade" id="customScreenModal" tabindex="-1" aria-labelledby="customScreenModalLabel"
    aria-hidden="true">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="customScreenModalLabel">
            <i class="bi bi-tv me-2"></i>Gerenciar Telas Personalizadas
          </h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <div class="mb-3">
            <button class="btn btn-primary mb-3" onclick="abrirModalAdicionarCustomScreen()">
              <i class="bi bi-plus-circle me-2"></i> Adicionar Nova Tela
              Personalizada
            </button>
          </div>
          <div id="customScreenList" class="list-group">
            <!-- Lista de telas personalizadas será renderizada aqui -->
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">
            <i class="bi bi-x-circle me-2"></i> Fechar
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal para Adicionar Tela Personalizada -->
  <div class="modal fade" id="addCustomScreenModal" tabindex="-1" aria-labelledby="addCustomScreenModalLabel"
    aria-hidden="true">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="addCustomScreenModalLabel">
            <i class="bi bi-plus-circle me-2"></i>Adicionar Tela Personalizada
          </h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <form id="addCustomScreenForm">
            <div class="mb-3">
              <label for="customScreenTitle" class="form-label">Título <span class="text-danger">*</span></label>
              <input type="text" class="form-control" id="customScreenTitle" required
                placeholder="Digite o título da tela personalizada" />
            </div>
            <div class="mb-3">
              <label for="customScreenContentAdd" class="form-label">Conteúdo (HTML/JSON)
                <span class="text-danger">*</span></label>
              <textarea class="form-control" id="customScreenContentAdd" rows="5" required
                placeholder="Digite o conteúdo da tela (HTML ou JSON)"></textarea>
            </div>
          </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">
            <i class="bi bi-x-circle me-2"></i> Cancelar
          </button>
          <button type="button" class="btn btn-primary" onclick="salvarCustomScreen()">
            <i class="bi bi-check-circle me-2"></i> Salvar
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal para Editar Tela Personalizada -->
  <div class="modal fade" id="editCustomScreenModal" tabindex="-1" aria-labelledby="editCustomScreenModalLabel"
    aria-hidden="true">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="editCustomScreenModalLabel">
            <i class="bi bi-pencil me-2"></i>Editar Tela Personalizada
          </h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <form id="editCustomScreenForm">
            <input type="hidden" id="editCustomScreenId" />
            <div class="mb-3">
              <label for="editCustomScreenTitle" class="form-label">Título <span class="text-danger">*</span></label>
              <input type="text" class="form-control" id="editCustomScreenTitle" required
                placeholder="Digite o título da tela personalizada" />
            </div>
            <div class="mb-3">
              <label for="editCustomScreenContent" class="form-label">Conteúdo (HTML/JSON)
                <span class="text-danger">*</span></label>
              <textarea class="form-control" id="editCustomScreenContent" rows="5" required
                placeholder="Digite o conteúdo da tela (HTML ou JSON)"></textarea>
            </div>
          </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">
            <i class="bi bi-x-circle me-2"></i> Cancelar
          </button>
          <button type="button" class="btn btn-primary" onclick="salvarEdicaoCustomScreen()">
            <i class="bi bi-check-circle me-2"></i> Salvar Alterações
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal para Excluir Tela Personalizada -->
  <div class="modal fade" id="deleteCustomScreenModal" tabindex="-1" aria-labelledby="deleteCustomScreenModalLabel"
    aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="deleteCustomScreenModalLabel">
            <i class="bi bi-trash me-2"></i>Excluir Tela Personalizada
          </h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <input type="hidden" id="deleteCustomScreenId" />
          <p>
            Tem certeza que deseja excluir a tela personalizada
            <strong id="deleteCustomScreenTitle"></strong>? Esta ação não pode
            ser desfeita.
          </p>
          <div class="alert alert-warning" role="alert">
            <i class="bi bi-exclamation-triangle me-2"></i>
            Todos os dados associados a esta tela serão permanentemente
            excluídos.
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">
            <i class="bi bi-x-circle me-2"></i> Cancelar
          </button>
          <button type="button" class="btn btn-danger" onclick="confirmarExclusaoCustomScreen()">
            <i class="bi bi-trash me-2"></i> Excluir
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <!-- Script do Dashboard -->
  <script src="modern-dashboard.js"></script>
  <script src="paineis.js"></script>

  <!-- Script para inicializar os tooltips do Bootstrap -->
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      // Inicializa os tooltips do Bootstrap
      var tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'))
      var tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
        return new bootstrap.Tooltip(tooltipTriggerEl)
      })

      // Adiciona funcionalidade para os cards de layout
      const layoutOptions = document.querySelectorAll('.layout-option');
      layoutOptions.forEach(card => {
        card.addEventListener('click', function() {
          const radio = this.querySelector('input[type="radio"]');
          radio.checked = true;
        });
      });
    });
  </script>
  
  <!-- Modal de Configuração -->
  <div class="modal fade" id="configModal" tabindex="-1" aria-labelledby="configModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="configModalLabel">
            <i class="bi bi-gear me-2"></i>Configurações
          </h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <!-- Informações do usuário -->
          <div class="mb-4">
            <h6 class="fw-bold mb-3">
              <i class="bi bi-person-circle me-2"></i>Usuário Logado
            </h6>
            <div class="d-flex align-items-center p-3 bg-light rounded">
              <div class="me-3">
                <i class="bi bi-person-circle text-primary" style="font-size: 2rem;"></i>
              </div>
              <div>
                <div class="fw-semibold" id="userNameModal">Usuário</div>
                <div class="text-muted small" id="userEmailModal">usuario@email.com</div>
              </div>
            </div>
          </div>
          
          <!-- Configurações de tema -->
          <div class="mb-4">
            <h6 class="fw-bold mb-3">
              <i class="bi bi-palette me-2"></i>Aparência
            </h6>
            <div class="form-check form-switch">
              <input class="form-check-input" type="checkbox" id="themeToggleModal">
              <label class="form-check-label" for="themeToggleModal">
                <i class="bi bi-moon me-2"></i>Modo Escuro
              </label>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
            <i class="bi bi-x-circle me-1"></i>Fechar
          </button>
          <button type="button" class="btn btn-danger" id="logoutBtnModal">
            <i class="bi bi-box-arrow-right me-1"></i>Sair
          </button>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Scripts de configuração -->
  <script>
    // Gerenciamento de tema
    const themeToggle = document.getElementById('themeToggle');
    const themeToggleModal = document.getElementById('themeToggleModal');
    const body = document.body;
    
    // Carregar tema salvo
    const savedTheme = localStorage.getItem('theme');
    if (savedTheme === 'dark') {
      body.classList.add('dark-theme');
      if (themeToggle) themeToggle.checked = true;
      if (themeToggleModal) themeToggleModal.checked = true;
    }
    
    // Função para alternar tema
    function toggleTheme() {
      body.classList.toggle('dark-theme');
      const isDark = body.classList.contains('dark-theme');
      localStorage.setItem('theme', isDark ? 'dark' : 'light');
      
      // Sincronizar toggles
      if (themeToggle) themeToggle.checked = isDark;
      if (themeToggleModal) themeToggleModal.checked = isDark;
    }
    
    // Event listeners para os toggles
    if (themeToggle) {
      themeToggle.addEventListener('change', toggleTheme);
    }
    if (themeToggleModal) {
      themeToggleModal.addEventListener('change', toggleTheme);
    }
    
    // Logout
    const logoutBtnSidebar = document.getElementById('logoutBtn');
    const logoutBtnModal = document.getElementById('logoutBtnModal');
    
    function handleLogout() {
      if (confirm('Tem certeza que deseja sair?')) {
        localStorage.removeItem('authToken');
        localStorage.removeItem('userData');
        window.location.href = '../index.html';
      }
    }
    
    if (logoutBtnSidebar) {
      logoutBtnSidebar.addEventListener('click', handleLogout);
    }
    if (logoutBtnModal) {
      logoutBtnModal.addEventListener('click', handleLogout);
    }
  </script>
</body>

</html>